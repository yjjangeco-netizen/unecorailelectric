{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport type { NextRequest } from 'next/server'\r\n\r\nexport function middleware(_request: NextRequest) {\r\n  const response = NextResponse.next()\r\n\r\n  // 보안 헤더 설정\r\n  const securityHeaders = {\r\n    // XSS 방지\r\n    'X-XSS-Protection': '1; mode=block',\r\n    \r\n    // MIME 타입 스니핑 방지\r\n    'X-Content-Type-Options': 'nosniff',\r\n    \r\n    // 클릭재킹 방지\r\n    'X-Frame-Options': 'SAMEORIGIN',\r\n    \r\n    // 리퍼러 정책\r\n    'Referrer-Policy': 'strict-origin-when-cross-origin',\r\n    \r\n    // 권한 정책\r\n    'Permissions-Policy': 'camera=(), microphone=(), geolocation=(), payment=()',\r\n    \r\n    // HSTS (HTTPS 강제)\r\n    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload',\r\n  }\r\n\r\n  // CSP (Content Security Policy) 설정\r\n  const cspDirectives = [\r\n    // 기본 소스 제한\r\n    \"default-src 'self'\",\r\n    \r\n    // 스크립트 소스 (자체 도메인 + Supabase)\r\n    \"script-src 'self' 'unsafe-eval' 'unsafe-inline' https://pnmyxzgyeipbvvnnwtoi.supabase.co\",\r\n    \r\n    // 스타일 소스\r\n    \"style-src 'self' 'unsafe-inline' https://fonts.googleapis.com\",\r\n    \r\n    // 폰트 소스\r\n    \"font-src 'self' https://fonts.gstatic.com\",\r\n    \r\n    // 이미지 소스\r\n    \"img-src 'self' data: https: blob:\",\r\n    \r\n    // 연결 소스 (Supabase API)\r\n    \"connect-src 'self' https://pnmyxzgyeipbvvnnwtoi.supabase.co https://*.supabase.co\",\r\n    \r\n    // 프레임 소스 제한\r\n    \"frame-ancestors 'self'\",\r\n    \r\n    // 객체 소스 제한\r\n    \"object-src 'none'\",\r\n    \r\n    // 기본 URI 제한\r\n    \"base-uri 'self'\",\r\n    \r\n    // 폼 액션 제한\r\n    \"form-action 'self'\",\r\n    \r\n    // 업그레이드 인시큐어 요청\r\n    \"upgrade-insecure-requests\",\r\n  ]\r\n\r\n  // 헤더 적용\r\n  Object.entries(securityHeaders).forEach(([key, value]) => {\r\n    response.headers.set(key, value)\r\n  })\r\n\r\n  // CSP 헤더 설정\r\n  response.headers.set('Content-Security-Policy', cspDirectives.join('; '))\r\n\r\n  return response\r\n}\r\n\r\n// 미들웨어 적용 경로 설정\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     */\r\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGO,SAAS,WAAW,QAAqB;IAC9C,MAAM,WAAW,6LAAA,CAAA,eAAY,CAAC,IAAI;IAElC,WAAW;IACX,MAAM,kBAAkB;QACtB,SAAS;QACT,oBAAoB;QAEpB,iBAAiB;QACjB,0BAA0B;QAE1B,UAAU;QACV,mBAAmB;QAEnB,SAAS;QACT,mBAAmB;QAEnB,QAAQ;QACR,sBAAsB;QAEtB,kBAAkB;QAClB,6BAA6B;IAC/B;IAEA,mCAAmC;IACnC,MAAM,gBAAgB;QACpB,WAAW;QACX;QAEA,8BAA8B;QAC9B;QAEA,SAAS;QACT;QAEA,QAAQ;QACR;QAEA,SAAS;QACT;QAEA,uBAAuB;QACvB;QAEA,YAAY;QACZ;QAEA,WAAW;QACX;QAEA,YAAY;QACZ;QAEA,UAAU;QACV;QAEA,gBAAgB;QAChB;KACD;IAED,QAAQ;IACR,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACnD,SAAS,OAAO,CAAC,GAAG,CAAC,KAAK;IAC5B;IAEA,YAAY;IACZ,SAAS,OAAO,CAAC,GAAG,CAAC,2BAA2B,cAAc,IAAI,CAAC;IAEnE,OAAO;AACT;AAGO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}