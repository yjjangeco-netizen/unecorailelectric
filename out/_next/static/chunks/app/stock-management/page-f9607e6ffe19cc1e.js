(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(5155),r=t(2115),l=t(2085),n=t(9434);let i=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:c=!1,...d}=e;return(0,a.jsx)("button",{className:(0,n.cn)(i({variant:r,size:l,className:t})),ref:s,...d})});c.displayName="Button"},3199:(e,s,t)=>{Promise.resolve().then(t.bind(t,3473))},3297:(e,s,t)=>{"use strict";t.d(s,{Rm:()=>n});var a=t(9032);class r{getLogLevel(){switch(a._.LOG_LEVEL){case"error":return"error";case"warn":return"warn";case"info":default:return"info";case"debug":return"debug"}}shouldLog(e){let s={debug:0,info:1,warn:2,error:3};return s[e]>=s[this.logLevel]}formatLog(e){let{timestamp:s,level:t,message:a,context:r,data:l,error:n}=e,i="[".concat(s,"] ").concat(t.toUpperCase());return r&&(i+=" [".concat(r,"]")),i+=": ".concat(a),l&&Object.keys(l).length>0&&(i+="\nData: ".concat(JSON.stringify(l,null,2))),n&&(i+="\nError: ".concat(n.message),n.stack&&(i+="\nStack: ".concat(n.stack))),i}log(e,s,t,a,r){if(!this.shouldLog(e))return;let l={timestamp:new Date().toISOString(),level:e,message:s,context:t||"",data:a||{},error:r||void 0},n=this.formatLog(l);switch(this.sendToExternalLogger(l),e){case"debug":console.warn("[DEBUG] ".concat(n));break;case"info":console.warn("[INFO] ".concat(n));break;case"warn":console.warn(n);break;case"error":console.error(n)}}sendToExternalLogger(e){"error"===e.level&&console.error(this.formatLog(e))}debug(e,s,t){this.log("debug",e,s,t)}info(e,s,t){this.log("info",e,s,t)}warn(e,s,t){this.log("warn",e,s,t)}error(e,s,t){this.log("error",e,void 0,t,s)}context(e){return{debug:(s,t)=>this.debug(s,e,t),info:(s,t)=>this.info(s,e,t),warn:(s,t)=>this.warn(s,e,t),error:(e,s,t)=>this.error(e,s,t)}}constructor(){this.logLevel="info",this.logLevel=this.getLogLevel()}}let l=new r,n={debug:l.debug.bind(l),info:l.info.bind(l),warn:l.warn.bind(l),error:l.error.bind(l),context:l.context.bind(l)}},3473:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ex});var a=t(5155),r=t(2115),l=t(5695),n=t(2354),i=t(9032);let c=i._.SUPABASE_URL,d=i._.SUPABASE_ANON_KEY;if("production"===i._.NODE_ENV&&(!i._.SUPABASE_URL||!i._.SUPABASE_ANON_KEY))throw Error("Missing Supabase environment variables. Please check your .env.local file.");let m=(0,n.UU)(c,d,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});var x=t(285),o=t(9434),u=t(1243),h=t(7108),p=t(5169),g=t(1007),j=t(381),y=t(3109),b=t(7924),N=t(9676),f=t(7434),v=t(2525),w=t(1189),k=t(4416);let C=w.bL;w.l9;let _=w.ZL;w.bm;let S=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});S.displayName=w.hJ.displayName;let D=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(_,{children:[(0,a.jsx)(S,{}),(0,a.jsxs)(w.UC,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,a.jsxs)(w.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});D.displayName=w.UC.displayName;let A=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};A.displayName="DialogHeader";let L=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});L.displayName=w.hE.displayName;let q=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});q.displayName=w.VY.displayName;var $=t(4616);function z(e){let{isOpen:s,onClose:t,onSave:l}=e,[n,i]=(0,r.useState)({itemName:"",quantity:"",unitPrice:"",notes:""}),c=()=>{i({itemName:"",quantity:"",unitPrice:"",notes:""}),t()};return(0,a.jsx)(C,{open:s,onOpenChange:c,children:(0,a.jsxs)(D,{className:"sm:max-w-md",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{children:"재고 입고"})]})}),(0,a.jsxs)("form",{onSubmit:e=>(e.preventDefault(),n.itemName.trim())?!n.quantity||0>=parseInt(n.quantity)?void alert("유효한 수량을 입력해주세요."):!n.unitPrice||0>parseFloat(n.unitPrice)?void alert("유효한 단가를 입력해주세요."):void(l(n),t()):void alert("품목명을 입력해주세요."),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["품목명 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:n.itemName,onChange:e=>i({...n,itemName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"품목명을 입력하세요",required:!0,maxLength:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["수량 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:n.quantity,onChange:e=>i({...n,quantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"1",max:"999999",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["단가 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:n.unitPrice,onChange:e=>i({...n,unitPrice:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",min:"0",step:"0.01",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비고"}),(0,a.jsx)("textarea",{value:n.notes,onChange:e=>i({...n,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"추가 메모를 입력하세요",maxLength:500})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,a.jsxs)(x.$,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"}),"입고 처리"]}),(0,a.jsx)(x.$,{type:"button",onClick:c,variant:"outline",className:"flex-1",children:"취소"})]})]})]})})}var E=t(9881);function O(e){let{isOpen:s,onClose:t,onSave:l,selectedItems:n=[]}=e,[i,c]=(0,r.useState)({quantity:"",project:"",notes:""});(0,r.useEffect)(()=>{s&&c({quantity:"",project:"",notes:""})},[s]);let d=()=>{c({quantity:"",project:"",notes:""}),t()};return(0,a.jsx)(C,{open:s,onOpenChange:d,children:(0,a.jsxs)(D,{className:"sm:max-w-md",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("span",{children:"재고 출고"})]})}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0===n.length)return void alert("출고할 항목을 선택해주세요.");if(!i.quantity||0>=parseInt(i.quantity))return void alert("출고 수량을 입력해주세요.");let s=parseInt(i.quantity),a=n.filter(e=>e.current_quantity<s);if(a.length>0){let e=a.map(e=>e.name).join(", ");alert("재고 부족: ".concat(e,"\n출고 수량을 재고 수량 이하로 조정해주세요."));return}l(i),t()},className:"space-y-4",children:[n.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-blue-900 mb-2",children:["선택된 항목 (",n.length,"개)"]}),(0,a.jsx)("div",{className:"space-y-1",children:n.map(e=>(0,a.jsxs)("div",{className:"text-xs text-blue-700 flex justify-between",children:[(0,a.jsx)("span",{className:"truncate flex-1",children:e.name}),(0,a.jsxs)("span",{className:"ml-2 text-blue-600 font-medium",children:["현재: ",e.current_quantity,"개"]})]},e.id))})]}),0===n.length&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-yellow-800",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"출고할 항목을 선택해주세요"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["출고 수량 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:i.quantity,onChange:e=>c({...i,quantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"출고할 수량을 입력하세요",min:"1",max:"999999",required:!0}),n.length>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["최대 출고 가능: ",Math.min(...n.map(e=>e.current_quantity)),"개"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"프로젝트/용도"}),(0,a.jsx)("input",{type:"text",value:i.project,onChange:e=>c({...i,project:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"프로젝트명 또는 용도를 입력하세요",maxLength:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비고"}),(0,a.jsx)("textarea",{value:i.notes,onChange:e=>c({...i,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"추가 메모를 입력하세요",maxLength:500})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,a.jsxs)(x.$,{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:0===n.length,children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"출고 처리"]}),(0,a.jsx)(x.$,{type:"button",onClick:d,variant:"outline",className:"flex-1",children:"취소"})]})]})]})})}function I(e){let{isOpen:s,onClose:t,onSearch:l}=e,[n,i]=(0,r.useState)("");return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-md",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{children:"재고 검색"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"검색어"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"품목명, 규격, 카테고리로 검색...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,a.jsxs)(x.$,{onClick:()=>{l(n),t()},className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"검색"]}),(0,a.jsx)(x.$,{onClick:t,variant:"outline",className:"flex-1",children:"취소"})]})]})]})})}function U(e){let{isOpen:s,onClose:t,item:r}=e;return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-2xl",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{children:"재고 이력"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[r?(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"품목 정보"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"품명:"})," ",r.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"규격:"})," ",r.specification||"-"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"현재 재고:"})," ",(null==r?void 0:r.current_quantity)||0,"개"]})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"품목을 선택해주세요"})]}),(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-500",children:"이력 조회 기능은 개발 중입니다."})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"닫기"})})]})]})})}var P=t(4186),R=t(3717),F=t(5196);function B(e){var s;let{isOpen:t,onClose:l,stockItems:n,onRental:i}=e,[c,d]=(0,r.useState)(""),[o,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)({name:"",specification:"",maker:"",purpose:"",unit_price:0}),[f,v]=(0,r.useState)({lastStockIn:"",lastStockOut:"",rentalCount:0});(0,r.useEffect)(()=>{c.trim()?u(n.filter(e=>{var s,t,a,r;return((null==(s=e.name)?void 0:s.toLowerCase())||"").includes(c.toLowerCase())||((null==(t=e.specification)?void 0:t.toLowerCase())||"").includes(c.toLowerCase())||((null==(a=e.maker)?void 0:a.toLowerCase())||"").includes(c.toLowerCase())||((null==(r=e.purpose)?void 0:r.toLowerCase())||"").includes(c.toLowerCase())})):u([])},[c,n]);let w=async e=>{p(e),N({name:e.name||"",specification:e.specification||"",maker:e.maker||"",purpose:e.purpose||"",unit_price:e.unit_price||0}),j(!1),await _(e.id)},_=async e=>{try{let{data:s}=await m.from("stock_in").select("received_at, received_by").eq("item_id",e).order("received_at",{ascending:!1}).limit(1),{data:t}=await m.from("stock_out").select("issued_at, issued_by, project").eq("item_id",e).order("issued_at",{ascending:!1}).limit(1),{data:a}=await m.from("stock_out").select("quantity, project").eq("item_id",e).eq("is_rental",!0).is("return_date",null),r=(null==s?void 0:s[0])?"".concat(s[0].received_at.split("T")[0]," (").concat(s[0].received_by,")"):"-",l=(null==t?void 0:t[0])?"".concat(t[0].issued_at.split("T")[0]," (").concat(t[0].issued_by,")").concat(t[0].project?" - ".concat(t[0].project):""):"-",n=(null==a?void 0:a.reduce((e,s)=>e+s.quantity,0))||0;v({lastStockIn:r,lastStockOut:l,rentalCount:n})}catch(e){console.error("최근 이력 로드 오류:",e)}},S=async()=>{if(h)try{let{error:e}=await m.from("items").update({name:y.name,specification:y.specification,maker:y.maker,purpose:y.purpose,unit_price:y.unit_price}).eq("id",h.id);if(e)throw e;alert("수정이 완료되었습니다."),j(!1),p({...h,name:y.name,specification:y.specification,maker:y.maker,purpose:y.purpose,unit_price:y.unit_price})}catch(e){console.error("수정 오류:",e),alert("수정 중 오류가 발생했습니다.")}};return(0,a.jsx)(C,{open:t,onOpenChange:l,children:(0,a.jsxs)(D,{className:"sm:max-w-[1200px] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(A,{children:[(0,a.jsx)(L,{children:"대여 관리"}),(0,a.jsx)(q,{children:"품목을 대여하고 반납을 관리할 수 있습니다."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"품명, 규격, 메이커, 용도로 검색...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),c&&(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(x.$,{size:"sm",variant:"outline",onClick:()=>d(""),children:"검색어 해제"})}),c&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["검색 결과: ",o.length,"개"]}),o.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"품명"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"규격"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"메이커"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer ".concat((null==h?void 0:h.id)===e.id?"bg-blue-50 border-blue-200":""),onClick:()=>w(e),children:[(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm text-gray-900",children:e.specification||"-"}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm text-gray-900",children:e.maker||"-"}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm text-gray-900",children:(0,a.jsxs)("span",{className:"font-medium ".concat(e.current_quantity>0?"text-green-600":"text-red-600"),children:[e.current_quantity,"개"]})}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm text-gray-900",children:(0,a.jsx)("div",{className:"flex space-x-1",children:(0,a.jsxs)(x.$,{size:"sm",onClick:s=>{s.stopPropagation(),i(e.id),l()},disabled:e.current_quantity<=0,className:"text-xs",children:[(0,a.jsx)(P.A,{className:"h-3 w-3 mr-1"}),"대여"]})})})]},e.id))})]})}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"검색 결과가 없습니다."})]}),!c&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(b.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"품명, 규격, 메이커, 용도로 검색해보세요"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:'예: "볼트", "M8", "삼성", "전기"'})]})]}),h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"선택된 품목 정보"}),(0,a.jsx)("div",{className:"flex space-x-2",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.$,{size:"sm",onClick:S,children:[(0,a.jsx)(F.A,{className:"h-4 w-4 mr-1"}),"저장"]}),(0,a.jsxs)(x.$,{size:"sm",variant:"outline",onClick:()=>{h&&N({name:h.name||"",specification:h.specification||"",maker:h.maker||"",purpose:h.purpose||"",unit_price:h.unit_price||0}),j(!1)},children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1"}),"취소"]})]}):(0,a.jsxs)(x.$,{size:"sm",variant:"outline",onClick:()=>{j(!0)},children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-1"}),"편집"]})})]}),g?(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"품명"}),(0,a.jsx)("input",{type:"text",value:y.name,onChange:e=>N({...y,name:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"규격"}),(0,a.jsx)("input",{type:"text",value:y.specification,onChange:e=>N({...y,specification:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"메이커"}),(0,a.jsx)("input",{type:"text",value:y.maker,onChange:e=>N({...y,maker:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"용도"}),(0,a.jsx)("input",{type:"text",value:y.purpose,onChange:e=>N({...y,purpose:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"단가"}),(0,a.jsx)("input",{type:"number",value:y.unit_price,onChange:e=>N({...y,unit_price:Number(e.target.value)}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}):(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"품명"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:h.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"규격"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:h.specification||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"메이커"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:h.maker||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"용도"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:h.purpose||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"현재 재고"}),(0,a.jsxs)("p",{className:"mt-1 text-sm font-medium ".concat(h.current_quantity>0?"text-green-600":"text-red-600"),children:[h.current_quantity,"개"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"단가"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:[null==(s=h.unit_price)?void 0:s.toLocaleString(),"원"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-md font-semibold mb-3",children:"대여 이력"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"최근 입고:"}),(0,a.jsx)("span",{className:"text-green-600",children:f.lastStockIn})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"최근 출고:"}),(0,a.jsx)("span",{className:"text-red-600",children:f.lastStockOut})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"대여 중:"}),(0,a.jsx)("span",{className:"text-blue-600",children:f.rentalCount>0?"".concat(f.rentalCount,"개"):"-"})]})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:(0,a.jsx)(x.$,{type:"button",variant:"outline",onClick:l,children:"닫기"})})]})})}let V=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});V.displayName="Input";var Q=t(1788),T=t(4229),K=t(3297);function J(e){let{isOpen:s,onClose:t,stockItems:l=[],onSave:n}=e,[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(""),[o,u]=(0,r.useState)(!1),p=l.filter(e=>{var s;return e.name.toLowerCase().includes(d.toLowerCase())||e.specification.toLowerCase().includes(d.toLowerCase())||(null==(s=e.maker)?void 0:s.toLowerCase().includes(d.toLowerCase()))}),g=e=>{c([...i,{itemId:(null==e?void 0:e.id)||"",itemName:(null==e?void 0:e.name)||"",specification:(null==e?void 0:e.specification)||"",currentQuantity:(null==e?void 0:e.current_quantity)||0,requestQuantity:1,unitPrice:(null==e?void 0:e.unit_price)||0,totalAmount:(null==e?void 0:e.unit_price)||0,project:"",notes:"",isRental:!1,returnDate:""}])},j=(e,s,t)=>{let a=[...i];if(a[e]){var r;a[e]={...a[e],[s]:t},"requestQuantity"===s&&(null==(r=a[e])?void 0:r.unitPrice)!==void 0&&(a[e].totalAmount=a[e].unitPrice*t)}c(a)},y=async()=>{try{u(!0);let e=i.filter(e=>e.itemId&&e.requestQuantity>0&&e.requestQuantity<=e.currentQuantity);if(0===e.length)throw Error("유효한 출고 항목이 없습니다");let s=e.filter(e=>e.requestQuantity>e.currentQuantity);if(s.length>0)throw Error("재고 부족: ".concat(s.map(e=>e.itemName).join(", ")));await n(e),t(),c([])}catch(e){K.Rm.error("대량 출고 저장 실패",e instanceof Error?e:Error(String(e)),{context:"BulkStockOutModal"}),alert(e instanceof Error?e.message:"저장 중 오류가 발생했습니다")}finally{u(!1)}},N=i.reduce((e,s)=>e+s.requestQuantity,0),f=i.reduce((e,s)=>e+s.totalAmount,0);return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-6xl max-h-[90vh] overflow-hidden",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("span",{children:"대량 출고"})]})}),(0,a.jsxs)("div",{className:"space-y-4 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-4 bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(b.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(V,{type:"text",placeholder:"품목명, 규격, 메이커로 검색...",value:d,onChange:e=>m(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(x.$,{onClick:()=>g(),variant:"outline",size:"sm",children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-1"}),"빈 행 추가"]}),(0,a.jsxs)(x.$,{onClick:()=>{let e=new Blob([["품목명,규격,현재재고,출고수량,단가,프로젝트,비고,대여여부,반납일",...i.map(e=>[e.itemName,e.specification,e.currentQuantity,e.requestQuantity,e.unitPrice,e.project,e.notes,e.isRental?"대여":"일반",e.returnDate].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="bulk_stock_out_".concat(new Date().toISOString().split("T")[0],".csv"),s.click()},variant:"outline",size:"sm",children:[(0,a.jsx)(Q.A,{className:"h-4 w-4 mr-1"}),"템플릿"]})]}),d&&(0,a.jsx)("div",{className:"max-h-32 overflow-y-auto border rounded bg-white",children:p.map(e=>(0,a.jsx)("div",{className:"p-2 hover:bg-gray-100 cursor-pointer border-b last:border-b-0",onClick:()=>{g(e),m("")},children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-gray-500 ml-2",children:e.specification})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["재고: ",e.current_quantity,"개 | ₩",e.unit_price.toLocaleString()]})]})},e.id))})]}),(0,a.jsx)("div",{className:"space-y-2",children:0===i.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"출고할 품목을 추가해주세요"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-2 bg-gray-100 rounded text-sm font-medium",children:[(0,a.jsx)("div",{className:"col-span-2",children:"품목명"}),(0,a.jsx)("div",{className:"col-span-2",children:"규격"}),(0,a.jsx)("div",{className:"col-span-1",children:"현재고"}),(0,a.jsx)("div",{className:"col-span-1",children:"출고수량"}),(0,a.jsx)("div",{className:"col-span-1",children:"단가"}),(0,a.jsx)("div",{className:"col-span-1",children:"총액"}),(0,a.jsx)("div",{className:"col-span-2",children:"프로젝트"}),(0,a.jsx)("div",{className:"col-span-2",children:"비고"}),(0,a.jsx)("div",{className:"col-span-1",children:"작업"})]}),i.map((e,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-2 border rounded hover:bg-gray-50",children:[(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(V,{value:e.itemName,onChange:e=>j(s,"itemName",e.target.value),placeholder:"품목명",className:"text-sm",readOnly:!!e.itemId})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(V,{value:e.specification,onChange:e=>j(s,"specification",e.target.value),placeholder:"규격",className:"text-sm"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(V,{value:e.currentQuantity,readOnly:!0,className:"text-sm bg-gray-100"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(V,{type:"number",value:e.requestQuantity,onChange:e=>j(s,"requestQuantity",parseInt(e.target.value)||0),min:"1",max:e.currentQuantity,className:"text-sm ".concat(e.requestQuantity>e.currentQuantity?"border-red-500":"")})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(V,{type:"number",value:e.unitPrice,onChange:e=>j(s,"unitPrice",parseFloat(e.target.value)||0),className:"text-sm"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(V,{value:"₩".concat(e.totalAmount.toLocaleString()),readOnly:!0,className:"text-sm bg-gray-100"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(V,{value:e.project,onChange:e=>j(s,"project",e.target.value),placeholder:"프로젝트명",className:"text-sm"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(V,{value:e.notes,onChange:e=>j(s,"notes",e.target.value),placeholder:"비고",className:"text-sm"})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(x.$,{onClick:()=>{c(i.filter((e,t)=>t!==s))},variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})})]},s))]})}),i.length>0&&(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{children:["총 ",i.length,"개 품목"]}),(0,a.jsxs)("span",{children:["총 수량: ",N,"개"]}),(0,a.jsxs)("span",{className:"font-medium",children:["총 금액: ₩",f.toLocaleString()]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t pt-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"취소"})}),(0,a.jsx)("div",{className:"space-x-2",children:(0,a.jsx)(x.$,{onClick:y,disabled:0===i.length||o,className:"bg-red-600 hover:bg-red-700",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"처리 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"출고 처리 (",i.length,"건)"]})})})]})]})})}var Y=t(2919);function G(e){let{isOpen:s,onClose:t,onLogin:l}=e,[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,o]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),p=async e=>{e.preventDefault(),o(!0),h("");try{await l(n,c)?(i(""),d(""),h(""),t()):h("로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요.")}catch(e){h("로그인 중 오류가 발생했습니다.")}finally{o(!1)}};return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-md",children:[(0,a.jsx)(A,{children:(0,a.jsx)(L,{className:"text-center",children:"로그인"})}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"사용자 ID"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{id:"username",type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"사용자 ID를 입력하세요",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{id:"password",type:"password",value:c,onChange:e=>d(e.target.value),placeholder:"비밀번호를 입력하세요",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),u&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center bg-red-50 p-2 rounded",children:u}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[(0,a.jsx)(x.$,{type:"submit",disabled:m,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:m?"로그인 중...":"로그인"}),(0,a.jsx)(x.$,{type:"button",onClick:t,variant:"outline",className:"flex-1",children:"취소"})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-700 text-center",children:[(0,a.jsx)("strong",{children:"테스트 계정:"}),(0,a.jsx)("br",{}),"관리자: admin / admin",(0,a.jsx)("br",{}),"전기팀: electric / electric"]})})]})})}function M(e){let{isOpen:s,onClose:t}=e,[l]=(0,r.useState)([{id:"1",username:"admin",name:"관리자",role:"관리자",department:"전기팀"},{id:"2",username:"electric",name:"전기팀",role:"전기팀",department:"전기팀"},{id:"3",username:"user1",name:"일반사용자",role:"사용자",department:"전기팀"}]);return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-4xl",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{children:"회원 관리"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase",children:"사용자ID"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase",children:"이름"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase",children:"권한"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase",children:"부서"}),(0,a.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-xs font-medium text-gray-500 uppercase",children:"작업"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:e.username}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:e.role}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:e.department}),(0,a.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-sm",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(x.$,{size:"sm",variant:"outline",children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1"}),"편집"]}),(0,a.jsxs)(x.$,{size:"sm",variant:"outline",className:"text-red-600",children:[(0,a.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"삭제"]})]})})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(x.$,{className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"}),"새 사용자 추가"]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"닫기"})})]})]})})}function X(e){let{isOpen:s,onClose:t}=e;return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-md",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("span",{children:"폐기 처리"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(v.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"폐기 처리 기능은 개발 중입니다."})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"닫기"})})]})]})})}var W=t(5968);function H(e){let{isOpen:s,onClose:t}=e;return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-4xl",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"h-5 w-5 text-red-600"}),(0,a.jsx)("span",{children:"폐기 이력"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(v.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"폐기 이력 조회 기능은 개발 중입니다."})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"닫기"})})]})]})})}function Z(e){let{isOpen:s,onClose:t}=e;return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-4xl",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(W.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{children:"입고 이력"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"입고 이력 조회 기능은 개발 중입니다."})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:t,variant:"outline",children:"닫기"})})]})]})})}var ee=t(9074);function es(e){var s;let{isOpen:t,onClose:l}=e,[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[o,u]=(0,r.useState)(""),[p,j]=(0,r.useState)([]),[y,b]=(0,r.useState)(""),[N,v]=(0,r.useState)("all");(0,r.useEffect)(()=>{t&&w()},[t]),(0,r.useEffect)(()=>{let e=n;o.trim()&&(e=e.filter(e=>{var s,t,a,r,l,n,i;return(null==(s=e.item.name)?void 0:s.toLowerCase().includes(o.toLowerCase()))||(null==(t=e.item.specification)?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null==(a=e.item.maker)?void 0:a.toLowerCase().includes(o.toLowerCase()))||(null==(r=e.issued_by)?void 0:r.toLowerCase().includes(o.toLowerCase()))||(null==(l=e.project)?void 0:l.toLowerCase().includes(o.toLowerCase()))||(null==(n=e.reason)?void 0:n.toString().toLowerCase().includes(o.toLowerCase()))||(null==(i=e.notes)?void 0:i.toString().toLowerCase().includes(o.toLowerCase()))})),y&&(e=e.filter(e=>e.issued_at.startsWith(y))),"all"!==N&&(e=e.filter(e=>"rental"===N?e.is_rental:!e.is_rental)),j(e)},[o,y,N,n]);let w=async()=>{try{d(!0);let{data:e,error:s}=await m.from("stock_out").select("\n          *,\n          item:items (\n            id,\n            name,\n            specification,\n            maker,\n            purpose,\n            unit_price\n          )\n        ").order("issued_at",{ascending:!1});if(s)throw s;i(e||[])}catch(e){console.error("출고 이력 로드 오류:",e)}finally{d(!1)}},k=o.trim()||y||"all"!==N?p:n;return(0,a.jsx)(C,{open:t,onOpenChange:l,children:(0,a.jsxs)(D,{className:"sm:max-w-[1200px] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(A,{children:[(0,a.jsxs)(L,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"출고 이력"]}),(0,a.jsx)(q,{children:"전체 출고 이력을 확인할 수 있습니다."})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"품목명, 규격, 메이커, 출고자, 프로젝트, 사유, 비고로 검색...",value:o,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),(0,a.jsx)("input",{type:"date",value:y,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsxs)("select",{value:N,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"all",children:"전체"}),(0,a.jsx)("option",{value:"rental",children:"대여"}),(0,a.jsx)("option",{value:"normal",children:"일반출고"})]}),(o.trim()||y||"all"!==N)&&(0,a.jsx)(x.$,{onClick:()=>{u(""),b(""),v("all")},variant:"outline",size:"sm",children:"해제"})]})}),c?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"데이터를 불러오는 중..."})]})}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"품목명"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"규격"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"메이커"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"출고수량"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"단가"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"총액"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"구분"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"출고자"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"출고일"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"프로젝트"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"사유"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"반납예정일"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"비고"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var s,t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.item.name}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.item.specification||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.item.maker||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)("span",{className:"font-medium text-blue-600",children:e.quantity})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.unit_price?"₩".concat(Number(e.unit_price).toLocaleString()):"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.total_amount?"₩".concat(Number(e.total_amount).toLocaleString()):"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_rental?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_rental?"대여":"일반출고"})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1 text-gray-400"}),e.issued_by||"-"]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ee.A,{className:"h-4 w-4 mr-1 text-gray-400"}),new Date(e.issued_at).toLocaleDateString()]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.project||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-1 text-gray-400"}),(null==(s=e.reason)?void 0:s.toString())||"-"]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.is_rental&&e.return_date?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-1 text-blue-400"}),new Date(e.return_date).toLocaleDateString()]}):"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==(t=e.notes)?void 0:t.toString())||"-"})]},e.id)})})]}),0===k.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:o.trim()||y||"all"!==N?"검색 결과가 없습니다.":"출고 이력이 없습니다."})]})]}),n.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"출고 통계"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"총 출고 건수:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[n.length,"건"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"총 출고 수량:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium text-blue-600",children:[n.reduce((e,s)=>e+s.quantity,0),"개"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"총 출고 금액:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium text-blue-600",children:["₩",n.reduce((e,s)=>e+(Number(s.total_amount)||0),0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"대여 건수:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium text-blue-600",children:[n.filter(e=>e.is_rental).length,"건"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"최근 출고:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:n.length>0?new Date((null==(s=n[0])?void 0:s.issued_at)||"").toLocaleDateString():"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"검색 결과:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[k.length,"건"]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:l,variant:"outline",children:"닫기"})})]})})}var et=t(8832);function ea(e){let{isOpen:s,onClose:t}=e,[l,n]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)("all"),[o,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=new Date,s=new Date(e.getTime()-2592e6);c(e.toISOString().split("T")[0]||""),n(s.toISOString().split("T")[0]||"")},[]);let g=(0,r.useCallback)(async()=>{p(!0);try{let e=[{id:"1",type:"in",item_name:"노트북",quantity:5,unit_price:12e5,total_amount:6e6,reason:"신규 구매",user:"admin@example.com",date:"2024-01-15"},{id:"2",type:"out",item_name:"프린터",quantity:2,unit_price:3e5,total_amount:6e5,project:"프로젝트 A",user:"user@example.com",date:"2024-01-16"}],s=e;l&&i&&(s=e.filter(e=>{let s=new Date(e.date),t=new Date(l),a=new Date(i);return s>=t&&s<=a})),"all"!==d&&(s=s.filter(e=>e.type===d)),u(s)}catch(e){console.error("이력 데이터 로드 오류:",e)}finally{p(!1)}},[d,l,i]);(0,r.useEffect)(()=>{s&&l&&i&&g()},[s,l,i,d,g]);let j=e=>new Intl.NumberFormat("ko-KR").format(e)+"원";return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(A,{children:(0,a.jsxs)(L,{className:"flex items-center space-x-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"재고 이력 관리"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"시작일"}),(0,a.jsx)("input",{type:"date",value:l,onChange:e=>n(e.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"종료일"}),(0,a.jsx)("input",{type:"date",value:i,onChange:e=>c(e.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"이력 유형"}),(0,a.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs sm:text-sm",children:[(0,a.jsx)("option",{value:"all",children:"전체"}),(0,a.jsx)("option",{value:"in",children:"입고"}),(0,a.jsx)("option",{value:"out",children:"출고"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(x.$,{onClick:g,disabled:h,className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-2",children:h?"로딩 중...":"조회"})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"구분"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"품목명"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"수량"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"단가"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"총액"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"사유/프로젝트"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"처리자"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"처리일"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2 ".concat("in"===e.type?"text-green-600":"text-red-600"),children:["in"===e.type?(0,a.jsx)(et.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}):(0,a.jsx)(E.A,{className:"h-3 w-3 sm:h-4 sm:w-4"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:"in"===e.type?"입고":"출고"})]})}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.item_name}),(0,a.jsxs)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:[e.quantity,"개"]}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:j(e.unit_price)}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:j(e.total_amount)}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.reason||e.project||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.user}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("ko-KR")})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:h?"데이터를 불러오는 중...":"조회된 이력이 없습니다."})})})]})}),o.length>0&&(0,a.jsx)("div",{className:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 text-xs sm:text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"총 건수:"}),(0,a.jsxs)("span",{className:"ml-2 text-blue-700",children:[o.length,"건"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"입고 건수:"}),(0,a.jsxs)("span",{className:"ml-2 text-blue-700",children:[o.filter(e=>"in"===e.type).length,"건"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"출고 건수:"}),(0,a.jsxs)("span",{className:"ml-2 text-blue-700",children:[o.filter(e=>"out"===e.type).length,"건"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"총 금액:"}),(0,a.jsx)("span",{className:"ml-2 text-blue-700",children:j(o.reduce((e,s)=>e+s.total_amount,0))})]})]})})]})})}var er=t(9869),el=t(5339),en=t(646);function ei(e){let{isOpen:s,onClose:t,onUploadComplete:l}=e,[n,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[o,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)("idle"),[y,b]=(0,r.useState)(""),[N,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=async()=>{try{let{data:{user:e},error:s}=await m.auth.getUser();e&&!s&&v({id:e.id,email:e.email||""})}catch(e){console.error("사용자 정보 가져오기 오류:",e)}};s&&e()},[s]);let w=async()=>{if(n&&0!==o.length){p(!0),j("uploading");try{for(let e of o){let{data:s}=await m.from("items").select("*").eq("name",e.item_name).eq("specification",e.specification).eq("maker",e.maker);if(s&&s.length>0){let t=s[0];await m.from("stock_in").insert({item_id:t.id,quantity:parseInt(e.item_number)||1,unit_price:0,condition_type:"new",reason:"CSV 업로드",ordered_by:(null==N?void 0:N.email)||"시스템",received_by:(null==N?void 0:N.email)||"시스템",received_at:new Date().toISOString()})}else{let{data:s,error:t}=await m.from("items").insert({name:e.item_name,specification:e.specification,maker:e.maker,unit_price:0,purpose:e.note||"CSV 업로드",min_stock:0,category:"기타",description:"".concat(e.specification," ").concat(e.maker," ").concat(e.note)}).select().single();if(t)throw t;await m.from("stock_in").insert({item_id:s.id,quantity:parseInt(e.item_number)||1,unit_price:0,condition_type:"new",reason:"CSV 업로드",ordered_by:(null==N?void 0:N.email)||"시스템",received_by:(null==N?void 0:N.email)||"시스템",received_at:new Date().toISOString()})}}j("success"),setTimeout(()=>{l(),t(),k()},2e3)}catch(e){console.error("CSV 업로드 오류:",e),j("error"),b("CSV 업로드 중 오류가 발생했습니다.")}finally{p(!1)}}},k=()=>{i(null),d(""),u([]),j("idle"),b("")},_=()=>{k(),t()};return(0,a.jsx)(C,{open:s,onOpenChange:_,children:(0,a.jsxs)(D,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(A,{children:[(0,a.jsx)(L,{children:"CSV 파일 업로드"}),(0,a.jsx)(q,{children:"CSV 파일을 업로드하여 여러 품목을 한번에 입고할 수 있습니다."})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV 파일 선택"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(x.$,{onClick:()=>{var e;return null==(e=document.getElementById("csv-file-input"))?void 0:e.click()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white",disabled:h,children:[(0,a.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"파일 선택"]}),(0,a.jsxs)(x.$,{onClick:()=>window.open("/csv-template.csv","_blank"),variant:"outline",className:"px-4 py-2",disabled:h,children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"템플릿 다운로드"]}),(0,a.jsx)("input",{id:"csv-file-input",type:"file",accept:".csv",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];t&&"text/csv"===t.type?(i(t),d(t.name),b(""),j("idle"),(e=>{let s=new FileReader;s.onload=e=>{var s,t;let a=(null==(s=e.target)?void 0:s.result).split("\n"),r=(a[0]||"").split(",").map(e=>e.trim());if(!["item_number","item_name","specification","maker","note","rack_location","barcode"].every(e=>r.some(s=>s.toLowerCase()===e.toLowerCase()))){b("CSV 파일의 헤더가 올바르지 않습니다. item_number, item_name, specification, maker, note, rack_location, barcode 컬럼이 필요합니다."),u([]);return}let l=[];for(let e=1;e<a.length;e++)if(null==(t=a[e])?void 0:t.trim()){let s=(a[e]||"").split(",").map(e=>e.trim());s.length>=7&&l.push({item_number:s[0]||"",item_name:s[1]||"",specification:s[2]||"",maker:s[3]||"",note:s[4]||"",rack_location:s[5]||"",barcode:s[6]||""})}u(l.slice(0,10))},s.readAsText(e)})(t)):t&&(b("CSV 파일만 업로드 가능합니다."),i(null),d(""),u([]))},className:"hidden"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:c||"선택된 파일이 없습니다"})})]})]}),y&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(el.A,{className:"h-5 w-5 text-red-600 mt-0.5"}),(0,a.jsx)("div",{className:"text-sm text-red-800",children:y})]})}),"uploading"===g&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-blue-800",children:"CSV 파일을 업로드하고 있습니다..."})]})}),"success"===g&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(en.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-800",children:"CSV 업로드가 완료되었습니다!"})]})}),o.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"데이터 미리보기 (처음 10개 항목)"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"품명"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"규격"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"메이커"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"비고"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RACK"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"바코드"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900",children:e.item_number}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900 font-medium",children:e.item_name}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.specification}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.maker}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.note||"-"}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-600",children:e.rack_location||"-"}),(0,a.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900",children:e.barcode||"-"})]},s))})]})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["총 ",o.length,"개 항목이 업로드됩니다."]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(x.$,{type:"button",variant:"outline",onClick:_,disabled:h,children:"취소"}),(0,a.jsx)(x.$,{onClick:w,disabled:!n||0===o.length||h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white",children:h?"업로드 중...":"다음으로"})]})]})]})})}var ec=t(5525);let ed=[{id:"1",menu_name:"Dashboard",menu_key:"dashboard",access_permission:!1},{id:"2",menu_name:"사용자관리",menu_key:"user_management",access_permission:!1},{id:"3",menu_name:"입고관리",menu_key:"inbound_management",access_permission:!1},{id:"4",menu_name:"출고관리Ⅰ",menu_key:"outbound_management_1",access_permission:!1},{id:"5",menu_name:"재고현황",menu_key:"stock_status",access_permission:!1},{id:"6",menu_name:"자료관리",menu_key:"data_management",access_permission:!1},{id:"7",menu_name:"자재관리",menu_key:"material_management",access_permission:!1},{id:"8",menu_name:"입출고내역",menu_key:"inout_history",access_permission:!1},{id:"9",menu_name:"출고관리 Ⅱ",menu_key:"outbound_management_2",access_permission:!1},{id:"10",menu_name:"권한관리",menu_key:"permission_management",access_permission:!1},{id:"11",menu_name:"시스템관리",menu_key:"system_management",access_permission:!1}];function em(e){let{isOpen:s,onClose:t}=e,[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(null),[o,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[,b]=(0,r.useState)(!1),[N,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&v()},[s]),(0,r.useEffect)(()=>{c(l.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())&&e.username.toLowerCase().includes(j.toLowerCase())))},[l,h,j]);let v=async()=>{try{b(!0);let e=[{id:"1",username:"A220907",name:"강다훈",role:"사용자"},{id:"2",username:"A220906",name:"이민지",role:"사용자"},{id:"3",username:"A220905",name:"정용상",role:"사용자"},{id:"4",username:"A220904",name:"박은영",role:"사용자"},{id:"5",username:"A220903",name:"최민정",role:"사용자"},{id:"6",username:"A220902",name:"박기준",role:"사용자"},{id:"7",username:"A220901",name:"김선우",role:"관리자"}];n(e),c(e)}catch(e){console.error("사용자 목록 로드 오류:",e)}finally{b(!1)}},w=async e=>{m(e),await k()},k=async()=>{try{let e=ed.map(e=>({...e,access_permission:Math.random()>.5}));u(e)}catch(e){console.error("사용자 권한 로드 오류:",e)}},_=async()=>{if(d)try{f(!0),alert("권한이 성공적으로 저장되었습니다.")}catch(e){console.error("권한 저장 오류:",e),alert("권한 저장 중 오류가 발생했습니다.")}finally{f(!1)}};return(0,a.jsx)(C,{open:s,onOpenChange:t,children:(0,a.jsxs)(D,{className:"sm:max-w-[1200px] max-h-[90vh] overflow-hidden",children:[(0,a.jsx)(A,{children:(0,a.jsx)(L,{className:"text-center text-2xl font-bold text-gray-900",children:"권한관리"})}),(0,a.jsxs)("div",{className:"flex h-full space-x-6",children:[(0,a.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"성명"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"성명으로 검색",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"아이디"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"아이디로 검색",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"#"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"아이디"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"성명"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer ".concat((null==d?void 0:d.id)===e.id?"bg-blue-50 border-l-4 border-blue-500":""),onClick:()=>w(e),children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("input",{type:"radio",name:"selectedUser",checked:(null==d?void 0:d.id)===e.id,onChange:()=>w(e),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.username}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.name})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"권한관리 상세정보"}),d?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:[d.name," (",d.username,")"]}),(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:["등급: ",d.role]})]})]})}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"#"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"메뉴명"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"접근권한"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.id}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:e.menu_name}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:e.access_permission,onChange:s=>{var t,a;return t=e.id,a=s.target.checked,void u(e=>e.map(e=>e.id===t?{...e,access_permission:a}:e))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.$,{onClick:_,disabled:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"저장 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"권한 저장"]})})})]}):(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(ec.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"사용자를 선택하여 권한을 관리하세요"})]})]})]})]})})}function ex(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[w,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(!1),[S,D]=(0,r.useState)(!1),[A,L]=(0,r.useState)(!1),[q,$]=(0,r.useState)(!1),[E,P]=(0,r.useState)(!1),[R,F]=(0,r.useState)(!1),[V,Q]=(0,r.useState)(null),[T,K]=(0,r.useState)(""),[Y,W]=(0,r.useState)([]),[ee,et]=(0,r.useState)(new Set),[er]=(0,r.useState)("name"),[el]=(0,r.useState)("asc"),[en,ec]=(0,r.useState)(!1),[ed,ex]=(0,r.useState)(null),[eo,eu]=(0,r.useState)(!1),[eh,ep]=(0,r.useState)(!1),[eg,ej]=(0,r.useState)(!1),[ey,eb]=(0,r.useState)(!1),[eN,ef]=(0,r.useState)(!1),[ev,ew]=(0,r.useState)(!1),[ek,eC]=(0,r.useState)(!1),[e_,eS]=(0,r.useState)(!1),eD=async()=>{try{d(!0);let{data:e,error:s}=await m.from("current_stock").select("*").order("name");if(s)throw s;t(e||[])}catch(e){console.error("재고 데이터 로드 오류:",e),console.error("데이터베이스 연결 실패. 재고 데이터를 표시할 수 없습니다."),t([]),k("데이터베이스 연결에 실패했습니다.")}finally{d(!1)}},eA=async()=>{try{let{data:e,error:s}=await m.from("items").select("*").order("name");if(s)throw s;i(e||[])}catch(e){console.error("품목 데이터 로드 오류:",e),console.error("데이터베이스 연결 실패. 품목 데이터를 표시할 수 없습니다."),i([])}};(0,r.useEffect)(()=>{eD(),eA(),(()=>{let e=localStorage.getItem("currentUser");if(e)try{let s=JSON.parse(e);ex(s),ec("관리자"===s.role);return}catch(e){console.error("저장된 사용자 정보 파싱 오류:",e),localStorage.removeItem("currentUser")}let s=new URLSearchParams(window.location.search),t=s.get("role"),a=s.get("user");if(t&&a){let e;"admin"===t?(e={username:a,name:"관리자",role:"관리자"},ec(!0)):(e="electric"===t?{username:a,name:"전기팀",role:"전기팀"}:{username:a,name:a,role:"사용자"},ec(!1)),ex(e),localStorage.setItem("currentUser",JSON.stringify(e))}})()},[]);let eL=async e=>{if(!ed)return void alert("로그인이 필요한 기능입니다.");try{let a={id:Date.now().toString(),name:e.itemName,specification:e.itemName,maker:"미정",unit_price:parseFloat(e.unitPrice)||0,purpose:"재고입고",min_stock:0,category:"일반",description:e.notes||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},r=s.findIndex(s=>s.name.toLowerCase()===e.itemName.toLowerCase());if(r>=0){let a=[...s],l=a[r];if(l){let s=(l.current_quantity||0)+parseInt(e.quantity);a[r]={...l,current_quantity:s,total_amount:s*(l.unit_price||0)}}t(a),alert("✅ ".concat(e.itemName," 입고 완료!\n기존 수량에 ").concat(e.quantity,"개 추가되었습니다."))}else{let a={id:Date.now().toString(),name:e.itemName,specification:e.itemName,unit_price:parseFloat(e.unitPrice)||0,current_quantity:parseInt(e.quantity)||0,total_amount:(parseFloat(e.unitPrice)||0)*(parseInt(e.quantity)||0),notes:e.notes||"",category:"일반",stock_status:"normal"};t([...s,a]),alert("✅ ".concat(e.itemName," 신규 입고 완료!\n수량: ").concat(e.quantity,"개"))}i([...n,a])}catch(e){console.error("입고 처리 오류:",e),alert("입고 처리 중 오류가 발생했습니다.")}},eq=async e=>{if(!ed)return void alert("로그인이 필요한 기능입니다.");try{if(0===ee.size)return void alert("출고할 항목을 선택해주세요.");let a=Array.from(ee),r=0;for(let l of a){let a=s.find(e=>e.id===l);if(a){let n=parseInt(e.quantity)||1;if(a.current_quantity>=n){let e=s.map(e=>e.id===l?{...e,current_quantity:e.current_quantity-n,total_amount:(e.current_quantity-n)*(e.unit_price||0)}:e);t(e),r++}else alert("⚠️ ".concat(a.name,": 재고 부족 (현재: ").concat(a.current_quantity,"개, 요청: ").concat(n,"개)"))}}r>0&&(alert("✅ ".concat(r,"개 항목 출고 완료!\n프로젝트: ").concat(e.project||"미정")),et(new Set))}catch(e){console.error("출고 처리 오류:",e),alert("출고 처리 중 오류가 발생했습니다.")}},e$=()=>{T.trim()?W(s.filter(e=>{var s,t,a;return((null==(s=e.name)?void 0:s.toLowerCase())||"").includes(T.toLowerCase())||((null==(t=e.specification)?void 0:t.toLowerCase())||"").includes(T.toLowerCase())||((null==(a=e.category)?void 0:a.toLowerCase())||"").includes(T.toLowerCase())})):W([])},ez=()=>{K(""),W([])},eE=[...T.trim()&&Y.length>0?Y:s].sort((e,s)=>{let t=e[er],a=s[er];if(null==t&&(t=""),null==a&&(a=""),"string"==typeof t&&"string"==typeof a){let e=t.localeCompare(a,"ko");return"asc"===el?e:-e}return"number"==typeof t&&"number"==typeof a?"asc"===el?t-a:a-t:0}),eO=async(e,s)=>{try{if("admin"===e&&"admin"===s){let e={username:"admin",name:"관리자",role:"관리자"};return ex(e),ec(!0),eu(!1),localStorage.setItem("currentUser",JSON.stringify(e)),!0}if("electric"===e&&"electric"===s){let e={username:"electric",name:"전기팀",role:"전기팀"};return ex(e),ec(!1),eu(!1),localStorage.setItem("currentUser",JSON.stringify(e)),!0}let{data:t,error:a}=await m.from("users").select("*").eq("username",e).eq("password",s).single();if(a||!t)return!1;let r="사용자";"admin"===t.role||t.is_admin?(r="관리자",ec(!0)):(("electric"===t.role||"전기팀"===t.department)&&(r="전기팀"),ec(!1));let l={username:t.username,name:t.name,role:r};return ex(l),eu(!1),localStorage.setItem("currentUser",JSON.stringify(l)),!0}catch(e){return console.error("로그인 오류:",e),!1}},eI=s.length,eU=s.filter(e=>"low_stock"===e.stock_status).length,eP=s.reduce((e,s)=>e+(s.current_quantity||0),0);return c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"재고 데이터를 불러오는 중..."})]})}):w?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"오류 발생"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:w}),(0,a.jsx)(x.$,{onClick:eD,children:"다시 시도"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"유네코레일 전기팀 자재관리 시스템"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(x.$,{onClick:()=>e.push("/"),variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"메인으로"})]}),ed?(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4 pl-4 border-l border-gray-300",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-600"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700 font-medium",children:[ed.name,"님 반갑습니다. (",ed.role,")"]}),en&&(0,a.jsxs)(x.$,{size:"sm",onClick:()=>ep(!0),variant:"outline",className:"ml-2 px-2 py-1 text-xs",children:[(0,a.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"회원관리"]}),(0,a.jsx)(x.$,{size:"sm",onClick:()=>{ex(null),ec(!1),eu(!1),localStorage.removeItem("currentUser"),_(!1),D(!1),F(!1),P(!1),L(!1),$(!1),ep(!1),ej(!1),eb(!1),ef(!1),ew(!1),eC(!1),eS(!1),et(new Set),K(""),W([])},variant:"outline",className:"px-2 py-1 text-xs text-red-600 border-red-300 hover:bg-red-50",children:"로그아웃"})]}):(0,a.jsx)("div",{className:"flex items-center space-x-2 ml-4 pl-4 border-l border-gray-300",children:(0,a.jsxs)(x.$,{size:"sm",onClick:()=>eu(!0),variant:"outline",className:"px-3 py-2 text-sm bg-blue-600 text-white border-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"로그인"]})})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(h.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"총 품목 수"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:eI})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(y.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"총 재고 수량"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:eP})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)(u.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"부족 재고"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:eU})]})]})})]}),ed&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\uD83D\uDE80 바로가기"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:[ed.name,"님의 권한에 맞는 메뉴입니다"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:["관리자"===ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{onClick:()=>e.push("/manual-management"),variant:"outline",size:"sm",className:"h-16 bg-white border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDA"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"메뉴얼 관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/stock-management"),variant:"outline",size:"sm",className:"h-16 bg-white border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE6"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"재고관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/sop"),variant:"outline",size:"sm",className:"h-16 bg-white border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"SOP"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/work-diary"),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"업무일지"})]})}),(0,a.jsx)(x.$,{onClick:()=>ep(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDC65"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"회원관리"})]})})]}),"전기팀"===ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{onClick:()=>e.push("/manual-management"),variant:"outline",size:"sm",className:"h-16 bg-white border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDA"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"메뉴얼 관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/stock-management"),variant:"outline",size:"sm",className:"h-16 bg-white border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE6"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"재고관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/sop"),variant:"outline",size:"sm",className:"h-16 bg-white border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"SOP"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/work-diary"),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"업무일지"})]})})]}),"관리자"!==ed.role&&"전기팀"!==ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{onClick:()=>e.push("/stock-management"),variant:"outline",size:"sm",className:"h-16 bg-white border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE6"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"재고관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/work-diary"),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"업무일지"})]})})]})]})]}),ed&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uD83D\uDCE6 바로가기"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[ed.name,"님의 권한에 맞는 기능입니다"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:["관리자"===ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{onClick:()=>_(!0),disabled:ee.size>0,variant:"outline",size:"sm",className:"h-16 ".concat(ee.size>0?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400"),title:ee.size>0?"선택된 항목이 있으면 입고할 수 없습니다":"입고 처리",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE5"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"입고"})]})}),(0,a.jsx)(x.$,{onClick:()=>D(!0),disabled:0===ee.size,variant:"outline",size:"sm",className:"h-16 ".concat(0===ee.size?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400"),title:0===ee.size?"출고할 항목을 선택해주세요":"".concat(ee.size,"개 항목 출고"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE4"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"출고"}),ee.size>0&&(0,a.jsxs)("div",{className:"text-xs text-red-600 font-bold",children:["(",ee.size,")"]})]})}),(0,a.jsx)(x.$,{onClick:()=>eC(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"CSV 업로드"})]})}),(0,a.jsx)(x.$,{onClick:()=>L(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDD0D"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"검색"})]})}),(0,a.jsx)(x.$,{onClick:()=>$(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"이력관리"})]})}),(0,a.jsx)(x.$,{onClick:()=>ej(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDDD1️"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"폐기"})]})}),(0,a.jsx)(x.$,{onClick:()=>ef(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-indigo-300 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE5\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"입고이력"})]})}),(0,a.jsx)(x.$,{onClick:()=>ew(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-pink-300 text-pink-700 hover:bg-pink-50 hover:border-pink-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE4\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"출고이력"})]})}),(0,a.jsx)(x.$,{onClick:()=>e.push("/stock-closing"),variant:"outline",size:"sm",className:"h-16 bg-white border-yellow-300 text-yellow-700 hover:bg-yellow-50 hover:border-yellow-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCC5"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"마감"})]})})]}),"전기팀"===ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{onClick:()=>_(!0),disabled:ee.size>0,variant:"outline",size:"sm",className:"h-16 ".concat(ee.size>0?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400"),title:ee.size>0?"선택된 항목이 있으면 입고할 수 없습니다":"입고 처리",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE5"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"입고"})]})}),(0,a.jsx)(x.$,{onClick:()=>D(!0),disabled:0===ee.size,variant:"outline",size:"sm",className:"h-16 ".concat(0===ee.size?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400"),title:0===ee.size?"출고할 항목을 선택해주세요":"".concat(ee.size,"개 항목 출고"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE4"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"출고"}),ee.size>0&&(0,a.jsxs)("div",{className:"text-xs text-red-600 font-bold",children:["(",ee.size,")"]})]})}),(0,a.jsx)(x.$,{onClick:()=>$(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"현황"})]})}),(0,a.jsx)(x.$,{onClick:()=>L(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDD0D"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"검색"})]})})]}),"관리자"!==ed.role&&"전기팀"!==ed.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{variant:"outline",size:"sm",disabled:!0,className:"h-16 bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed",title:"권한이 없습니다",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE5"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"입고"})]})}),(0,a.jsx)(x.$,{variant:"outline",size:"sm",disabled:!0,className:"h-16 bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed",title:"권한이 없습니다",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCE4"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"출고"})]})}),(0,a.jsx)(x.$,{onClick:()=>$(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDCCB"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"현황"})]})}),(0,a.jsx)(x.$,{onClick:()=>L(!0),variant:"outline",size:"sm",className:"h-16 bg-white border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:"\uD83D\uDD0D"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:"검색"})]})})]})]})]}),!ed&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-yellow-900 mb-2",children:"\uD83D\uDD12 로그인이 필요한 기능"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"현재 재고 검색만 가능합니다. 입고, 출고, 이력관리 등 모든 기능을 이용하려면 로그인이 필요합니다."}),(0,a.jsxs)(x.$,{size:"sm",onClick:()=>eu(!0),className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"로그인하기"]})]})]})}),T&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mt-0.5 sm:mt-0"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-blue-900",children:["검색 결과: ",(0,a.jsx)("span",{className:"font-bold",children:Y.length}),"개"]}),(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:["검색어: ",(0,a.jsxs)("span",{className:"font-medium",children:['"',T,'"']}),"(품명, 규격, 분류에서 검색)"]}),Y.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:["총 수량: ",Y.reduce((e,s)=>e+(s.current_quantity||0),0).toLocaleString(),"개 | 총 금액: ",(0,o.vv)(Y.reduce((e,s)=>e+(s.total_amount||0),0))]})]})]}),(0,a.jsx)(x.$,{size:"sm",variant:"outline",onClick:ez,className:"px-3 py-2 text-blue-600 border-blue-300 hover:bg-blue-100 text-xs sm:text-sm",children:"검색 해제"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"전체 재고 현황"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto",children:[(0,a.jsx)("div",{className:"relative flex-1 sm:flex-none",children:(0,a.jsx)("input",{type:"text",placeholder:"품명, 규격, 분류로 검색...",value:T,onChange:e=>{K(e.target.value)},onKeyPress:e=>"Enter"===e.key&&e$(),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),(0,a.jsxs)(x.$,{size:"sm",onClick:e$,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"검색"]}),T&&(0,a.jsx)(x.$,{size:"sm",variant:"outline",onClick:ez,className:"px-3 py-2",children:"해제"})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",checked:ee.size===eE.length&&eE.length>0,onChange:e=>{e.target.checked?et(new Set(eE.map(e=>e.id))):et(new Set)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Tag NO."}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"위치"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"품명"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"규격"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"재질"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"단위"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"전분기 재고"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"입고수량"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"불출수량"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"최종재고"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"실수량"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"불출내용"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"비고"}),(0,a.jsx)("th",{className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"작업"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eE.length>0?eE.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:ee.has(e.id),onChange:s=>{let t=new Set(ee);s.target.checked?t.add(e.id):t.delete(e.id),et(t)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.id||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:e.location||"-"})})}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:e.name})})}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.specification||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.material||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.unit||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.previousQuarterQuantity||0}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.stockInQuantity||0}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.stockOutQuantity||0}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:(0,a.jsx)("span",{className:"font-medium text-blue-600",children:e.current_quantity||0})}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.actualQuantity||0}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.stockOutContent||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:e.notes||"-"}),(0,a.jsx)("td",{className:"px-2 sm:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)("button",{onClick:()=>{Q(e),$(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"재고 이력 보기",children:(0,a.jsx)(N.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:14,className:"px-6 py-8 text-center text-gray-500",children:T?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-lg font-medium text-gray-700",children:"검색 결과가 없습니다"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["검색어: ",(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:['"',T,'"']})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"위치, 품명, 규격, 재질에서 검색됩니다"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-lg font-medium text-gray-700",children:"재고 데이터가 없습니다"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"입고 데이터를 추가해주세요"})]})})})})]})})]})]}),ed&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-4 mt-6 mb-4 px-4",children:[(0,a.jsxs)(x.$,{onClick:()=>{$(!0)},variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"통합 이력"]}),(0,a.jsxs)(x.$,{onClick:()=>{alert("로그인이 필요한 기능입니다.")},variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"입고 이력"]}),(0,a.jsxs)(x.$,{onClick:()=>{alert("로그인이 필요한 기능입니다.")},variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"출고 이력"]}),(0,a.jsxs)(x.$,{onClick:()=>e.push("/work-diary"),variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm bg-green-50 border-green-200 text-green-700 hover:bg-green-100 hover:border-green-300",children:[(0,a.jsx)(f.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"업무일지 작성"]}),(0,a.jsxs)(x.$,{onClick:()=>$(!0),variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm bg-orange-50 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"이력관리"]}),en&&(0,a.jsxs)(x.$,{onClick:()=>e.push("/stock-closing"),variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm bg-yellow-50 border-yellow-200 text-yellow-700 hover:bg-yellow-100 hover:border-yellow-300",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"마감"]}),en&&(0,a.jsxs)(x.$,{onClick:()=>{alert("로그인이 필요한 기능입니다.")},variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",children:[(0,a.jsx)(v.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"폐기 이력"]})]}),(0,a.jsx)(z,{isOpen:C,onClose:()=>_(!1),onSave:eL}),(0,a.jsx)(O,{isOpen:S,onClose:()=>D(!1),onSave:eq,selectedItems:Array.from(ee).map(e=>{let t=s.find(s=>s.id===e);return t?{id:t.id,name:t.name,current_quantity:t.current_quantity||0}:null}).filter(Boolean)}),(0,a.jsx)(I,{isOpen:A,onClose:()=>L(!1),onSearch:e=>{K(e),L(!1)}}),(0,a.jsx)(U,{isOpen:q,onClose:()=>$(!1),item:V?{id:V.id,name:V.name,specification:V.specification,current_quantity:V.current_quantity}:null}),(0,a.jsx)(B,{isOpen:E,onClose:()=>P(!1),stockItems:s,onRental:()=>alert("로그인이 필요한 기능입니다.")}),(0,a.jsx)(J,{isOpen:R,onClose:()=>F(!1),stockItems:s,onSave:async()=>alert("로그인이 필요한 기능입니다.")}),(0,a.jsx)(G,{isOpen:eo,onLogin:eO,onClose:()=>eu(!1)}),(0,a.jsx)(M,{isOpen:eh,onClose:()=>ep(!1)}),(0,a.jsx)(X,{isOpen:eg,onClose:()=>ej(!1)}),(0,a.jsx)(H,{isOpen:ey,onClose:()=>eb(!1)}),(0,a.jsx)(Z,{isOpen:eN,onClose:()=>ef(!1)}),(0,a.jsx)(es,{isOpen:ev,onClose:()=>ew(!1)}),(0,a.jsx)(ea,{isOpen:q,onClose:()=>$(!1)}),(0,a.jsx)(ei,{isOpen:ek,onClose:()=>eC(!1),onUploadComplete:()=>{eD(),eA()}}),(0,a.jsx)(em,{isOpen:e_,onClose:()=>eS(!1)})]})}},9032:(e,s,t)=>{"use strict";t.d(s,{_:()=>r});var a=t(9509);let r={SUPABASE_URL:a.env.NEXT_PUBLIC_SUPABASE_URL||"https://example.supabase.co",SUPABASE_ANON_KEY:a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"example-key",NODE_ENV:"production",LOG_LEVEL:a.env.NEXT_PUBLIC_LOG_LEVEL||a.env.LOG_LEVEL||"info"};r.NODE_ENV},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n,vV:()=>c,vv:()=>i});var a=t(2596),r=t(9688),l=t(3297);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}let i=e=>{try{return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e)}catch(s){return l.Rm.warn("통화 포맷팅 오류","formatCurrency",{amount:e,error:s}),"".concat(e.toLocaleString(),"원")}},c=(e,s,t)=>{let a={timestamp:new Date().toISOString(),context:e,error:s instanceof Error?{message:s.message,stack:s.stack,name:s.name}:s,additionalInfo:t,userAgent:window.navigator.userAgent,url:window.location.href};l.Rm.error(e,s instanceof Error?s:Error(String(s)),{...t,timestamp:a.timestamp,userAgent:a.userAgent,url:a.url})}}},e=>{e.O(0,[598,426,441,964,358],()=>e(e.s=3199)),_N_E=e.O()}]);