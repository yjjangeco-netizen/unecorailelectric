{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/CSHOP/unecorailelectric/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\n// 환경 변수에서 Supabase 설정 가져오기\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://example.supabase.co'\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'example-key'\n\n// 개발 환경에서는 기본값 사용, 프로덕션에서는 환경변수 필수\nif (process.env.NODE_ENV === 'production' && (!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)) {\n  throw new Error('Missing Supabase environment variables. Please check your .env.local file.')\n}\n\n// 브라우저용 클라이언트 (SSR 지원)\nexport const createBrowserSupabaseClient = () => {\n  return createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n      autoRefreshToken: true,\n      persistSession: true,\n      detectSessionInUrl: true\n    }\n  })\n}\n\n// 서버용 클라이언트 (SSR 지원)\nexport const createServerSupabaseClient = () => {\n  return createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false\n    }\n  })\n}\n\n// 기존 클라이언트 (하위 호환성)\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true\n  }\n})\n\n// 품목 타입 정의\nexport interface Item {\n  id: string\n  name: string           // 품명\n  specification: string   // 규격\n  maker: string          // 메이커\n  unit_price: number     // 금액\n  purpose: string        // 용도\n  min_stock: number      // 최소재고\n  category?: string\n  description?: string\n  created_at: string\n  updated_at: string\n}\n\n// 입고 타입 정의\nexport interface StockIn {\n  id: string\n  item_id: string\n  quantity: number\n  unit_price: number\n  condition_type: 'new' | 'used_good' | 'used_defective' | 'unknown'\n  reason?: string\n  ordered_by?: string\n  received_by: string\n  received_at: string\n}\n\n// 출고 타입 정의\nexport interface StockOut {\n  id: string\n  item_id: string\n  quantity: number\n  project?: string\n  issued_by: string\n  is_rental: boolean\n  return_date?: string\n  issued_at: string\n}\n\n// 현재 재고 타입 정의\nexport interface CurrentStock {\n  id: string\n  name: string\n  specification: string\n  unit_price: number\n  current_quantity: number\n  total_amount: number\n  notes?: string\n  category?: string\n  stock_status: 'normal' | 'low_stock'\n}\n\nexport interface User {\n  id: string\n  username: string\n  password: string\n  name: string\n  department: string\n  position: string\n  phone: string\n  is_admin: boolean\n  created_at: string\n  updated_at: string\n}\n\nexport interface UserGroup {\n  id: string\n  name: string\n  description: string\n  created_at: string\n}\n\nexport interface UserGroupMember {\n  id: string\n  user_id: string\n  group_id: string\n  created_at: string\n}\n\nexport interface Disposal {\n  id: string\n  stock_in_id: string\n  item_id: string\n  quantity: number\n  disposed_by: string\n  disposed_at: string\n  reason: string\n  notes: string\n  created_at: string\n} "],"names":[],"mappings":";;;;;AAAA;;AAEA,2BAA2B;AAC3B,MAAM,cAAc,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAC5D,MAAM,kBAAkB,QAAQ,GAAG,CAAC,6BAA6B,IAAI;AAErE,mCAAmC;AACnC;;AAKO,MAAM,8BAA8B;IACzC,OAAO,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;QAChD,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;YAChB,oBAAoB;QACtB;IACF;AACF;AAGO,MAAM,6BAA6B;IACxC,OAAO,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;QAChD,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AACF;AAGO,MAAM,WAAW,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;IACtB;AACF","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/CSHOP/unecorailelectric/src/app/api/test/setup/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { createServerSupabaseClient } from '@/lib/supabase'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const supabase = createServerSupabaseClient()\r\n    \r\n    // 테스트용 품목 데이터 생성\r\n    const testItems = [\r\n      {\r\n        id: 'test_item_1',\r\n        name: '전기 케이블 3C 2.5sq',\r\n        specification: '3C 2.5sq',\r\n        maker: 'LS전선',\r\n        unit_price: 2500,\r\n        purpose: '전기 배선',\r\n        min_stock: 100,\r\n        category: '전기자재',\r\n        description: '테스트용 전기 케이블',\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      },\r\n      {\r\n        id: 'test_item_2',\r\n        name: '배선용 차단기 20A',\r\n        specification: '20A 1P',\r\n        maker: 'LS산전',\r\n        unit_price: 15000,\r\n        purpose: '전기 보호',\r\n        min_stock: 50,\r\n        category: '전기자재',\r\n        description: '테스트용 차단기',\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      },\r\n      {\r\n        id: 'test_item_3',\r\n        name: 'LED 조명 20W',\r\n        specification: '20W 220V',\r\n        maker: '삼성전자',\r\n        unit_price: 8000,\r\n        purpose: '조명',\r\n        min_stock: 200,\r\n        category: '조명',\r\n        description: '테스트용 LED 조명',\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      }\r\n    ]\r\n\r\n    // 테스트용 현재 재고 데이터 생성\r\n    const testCurrentStock = [\r\n      {\r\n        id: 'test_stock_1',\r\n        name: '전기 케이블 3C 2.5sq',\r\n        specification: '3C 2.5sq',\r\n        unit_price: 2500,\r\n        current_quantity: 500,\r\n        total_amount: 1250000,\r\n        notes: '테스트 재고',\r\n        category: '전기자재',\r\n        stock_status: 'normal'\r\n      },\r\n      {\r\n        id: 'test_stock_2',\r\n        name: '배선용 차단기 20A',\r\n        specification: '20A 1P',\r\n        unit_price: 15000,\r\n        current_quantity: 100,\r\n        total_amount: 1500000,\r\n        notes: '테스트 재고',\r\n        category: '전기자재',\r\n        stock_status: 'normal'\r\n      },\r\n      {\r\n        id: 'test_stock_3',\r\n        name: 'LED 조명 20W',\r\n        specification: '20W 220V',\r\n        unit_price: 8000,\r\n        current_quantity: 300,\r\n        total_amount: 2400000,\r\n        notes: '테스트 재고',\r\n        category: '조명',\r\n        stock_status: 'normal'\r\n      }\r\n    ]\r\n\r\n    // 데이터베이스에 테스트 데이터 삽입\r\n    let itemsCreated = 0\r\n    let stockCreated = 0\r\n\r\n    // 품목 데이터 삽입\r\n    for (const item of testItems) {\r\n      const { error } = await supabase\r\n        .from('items')\r\n        .upsert(item, { onConflict: 'id' })\r\n      \r\n      if (!error) {\r\n        itemsCreated++\r\n      }\r\n    }\r\n\r\n    // 현재 재고 데이터 삽입\r\n    for (const stock of testCurrentStock) {\r\n      const { error } = await supabase\r\n        .from('current_stock')\r\n        .upsert(stock, { onConflict: 'id' })\r\n      \r\n      if (!error) {\r\n        stockCreated++\r\n      }\r\n    }\r\n\r\n    return NextResponse.json({\r\n      ok: true,\r\n      message: '테스트 데이터 생성 완료',\r\n      data: {\r\n        itemsCreated,\r\n        stockCreated,\r\n        totalItems: testItems.length,\r\n        totalStock: testCurrentStock.length\r\n      }\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('테스트 데이터 생성 오류:', error)\r\n    return NextResponse.json({\r\n      ok: false,\r\n      error: '테스트 데이터 생성 중 오류가 발생했습니다.',\r\n      details: error instanceof Error ? error.message : '알 수 없는 오류'\r\n    }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function DELETE() {\r\n  try {\r\n    const supabase = createServerSupabaseClient()\r\n    \r\n    // 테스트 데이터 삭제\r\n    const { error: itemsError } = await supabase\r\n      .from('items')\r\n      .delete()\r\n      .like('id', 'test_%')\r\n    \r\n    const { error: stockError } = await supabase\r\n      .from('current_stock')\r\n      .delete()\r\n      .like('id', 'test_%')\r\n\r\n    if (itemsError || stockError) {\r\n      throw new Error('테스트 데이터 삭제 중 오류 발생')\r\n    }\r\n\r\n    return NextResponse.json({\r\n      ok: true,\r\n      message: '테스트 데이터 초기화 완료'\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('테스트 데이터 초기화 오류:', error)\r\n    return NextResponse.json({\r\n      ok: false,\r\n      error: '테스트 데이터 초기화 중 오류가 발생했습니다.',\r\n      details: error instanceof Error ? error.message : '알 수 없는 오류'\r\n    }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}